<!--
  Copyright 2014 IBM Corp.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/x-red" data-template-name="amazon s3 out">
    <div class="form-row">
        <label for="node-input-aws"><i class="fa fa-user"></i> AWS</label>
        <input type="text" id="node-input-aws">
    </div>
    <div class="form-row">
        <label for="node-input-bucket"><i class="fa fa-folder"></i> Bucket</label>
        <input type="text" id="node-input-bucket" placeholder="bucket name">
    </div>
    <div class="form-row node-input-filename">
         <label for="node-input-filename"><i class="fa fa-file"></i> Filename</label>
         <input type="text" id="node-input-filename" placeholder="Filename">
    </div>
    <div class="form-row node-input-localFilename">
         <label for="node-input-localFilename"><i class="fa fa-file"></i> Local Filename</label>
         <input type="text" id="node-input-localFilename" placeholder="Local Filename">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>

<script type="text/x-red" data-help-name="amazon s3 out">
    <p>Amazon S3 out node. Uploads content to an Amazon S3 bucket. The bucket name can be specified in the node property or in the <b>msg.bucket</b> property. The filename on Amazon S3 is taken from the node <b>filename</b> property which may be overriden by the <b>msg.filename</b> property. The content is taken from either the node <b>localFilename</b> (which may be overriden by the <b>msg.localFilename</b> property) or the <b>msg.payload</b> property.</p>
    <p>If a <b>msg.delete</b> property exists then the file will be removed from Amazon S3 instead.</p>
</script>

<script type="text/javascript">
    RED.nodes.registerType('amazon s3 out',{
        category: 'storage-output',
        color:"#C0DEED",
        defaults: {
            aws: {type:"aws-config",required:true},
            bucket: {required:true},
            filename: {value:""},
            localFilename: {value:""},
        },
        inputs:1,
        outputs:0,
        align: "right",
        label: function() {
            return this.bucket ? "s3 "+this.bucket : "s3";
        }
    });
</script>
